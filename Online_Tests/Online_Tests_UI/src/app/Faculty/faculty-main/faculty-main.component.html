<p-tabView styleClass="tabview-custom">
    <p-tabPanel>
        <ng-template pTemplate="header">
            <span>Question Papers</span>
        </ng-template>
        <ng-container *ngFor="let paper of questionPapers">
            <p-card class="papers">
                <ng-template pTemplate="content">
                    <h4><strong>{{paper.name}}</strong></h4>
                    <button pButton type="button" label="Edit Paper Settings"
                        class="p-button-outlined vertical-align-middle" icon="pi pi-cog" (click)="onEditPaperSettings(paper)"></button>
                    <button pButton routerLink="/questionPaperEdit" type="button" label="View Questions"
                        class="p-button-outlined vertical-align-middle ml-2" icon="pi pi-eye"></button>
                    <button pButton type="button" label="Delete"
                        class="p-button-outlined p-button-danger vertical-align-middle ml-2" icon="pi pi-trash"></button>
                </ng-template>
            </p-card>
        </ng-container>
    </p-tabPanel>
    <p-tabPanel header="Header II">
        <ng-template pTemplate="header">
            <i class="pi pi-plus"></i>
            <span class="ml-1">Create Question Paper</span>
        </ng-template>
        <p-card>

            <div class="grid">
                <div class="col-2">
                    <label for="firstname2">Question Paper Name<span class="required"> *</span></label>
                </div>
                <div class="col">
                    <input id="firstname2" pInputText [(ngModel)]="questionPaperName">
                    <br>
                    <p *ngIf="questionPaperNameInvalid" class="required">This field is required</p>
                </div>
            </div>
            <div class="grid">
                <div class="col-2">
                    <label>Time bound</label>
                </div>
                <div class="col">
                    <p-dropdown [options]="timeBoundValues" optionLabel="label" optionValue="value" [(ngModel)]="isTimeBound"></p-dropdown>
                </div>
            </div>
            <div class="grid" *ngIf="isTimeBound">
                <div class="col-2">
                    <label for="firstname2">Test Duration</label>
                </div>
                <div class="col">
                    <p-calendar [timeOnly]="true" [(ngModel)]="testDuration" placeholder="hh:mm"></p-calendar>
                    <br>
                    <p *ngIf="testDurationInvalid" class="required">This field is required</p>
                </div>
            </div>
            <div class="grid">
                <div class="col-2">
                    <label for="firstname2">Branch</label>
                </div>
                <div class="col">
                    <p-multiSelect [options]="branches" [(ngModel)]="branchesSelected" optionLabel="label" optionValue="value"></p-multiSelect>
                </div>
            </div>
            <div class="grid">
                <div class="col-2">
                    <label for="firstname2">Section</label>
                </div>
                <div class="col">
                    <p-multiSelect [options]="sectionsInBranch" [(ngModel)]="sectionsSelected" optionLabel="label" optionValue="value"></p-multiSelect>
                </div>
            </div>
            <div class="grid">
                <div class="col-2">
                    <label>Multiple Sections</label>
                </div>
                <div class="col">
                    <p-dropdown [options]="multipleSections" optionLabel="label"
                        [(ngModel)]="isContainsMultipleSections"></p-dropdown>
                </div>
            </div>
            <div class="grid" *ngIf="isContainsMultipleSections.value">
                <div class="col-2">
                    <label class="mt-3">Section Name</label>
                </div>
                <div class="col">
                    <div class="grid">
                        <div class="col-12">
                            <input pInputText [(ngModel)]="sectionName">
                            <button pButton class="ml-2 p-button-text p-button-rounded" icon="pi pi-plus"
                                (click)="onAddSection()"></button>
                            <br>
                            <br>
                            <p *ngIf="sectionNameEmpty" class="required">Enter a non-empty value</p>
                        </div>
                        <div class="col-12">
                            <p-table [value]="sectionsInQuestionPaper" *ngIf="sectionsInQuestionPaper.length > 0"
                                editMode="row" dataKey="id">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Section Name</th>
                                        <th>Edit</th>
                                        <th>Delete</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-data let-ri="rowIndex" let-editing="editing">
                                    <tr [pEditableRow]="data">
                                        <td>
                                            <p-cellEditor>
                                                <ng-template pTemplate="input">
                                                    <input pInputText type="text" [(ngModel)]="data.name">
                                                </ng-template>
                                                <ng-template pTemplate="output">
                                                    {{data.name}}
                                                </ng-template>
                                            </p-cellEditor>
                                        </td>
                                        <td><button *ngIf="!editing" pButton icon="pi pi-pencil" class="p-button-text"
                                                pInitEditableRow></button>
                                            <button *ngIf="editing" pButton pRipple type="button" icon="pi pi-check"
                                                (click)="onEditSave(ri)" pSaveEditableRow
                                                class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                            <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow
                                                icon="pi pi-times" (click)="onEditCancel(ri)"
                                                class="p-button-rounded p-button-text p-button-danger"></button>
                                        </td>
                                        <td><button pButton icon="pi pi-trash" (click)="onDeleteSection(ri)"
                                                class="p-button-text p-button-danger"></button></td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid">
                <div class="col-2">
                    <label>Built In key</label>
                </div>
                <div class="col">
                    <p-dropdown [options]="builtInKeyOptions" optionLabel="label" [(ngModel)]="builtInKey"></p-dropdown>
                </div>
            </div>
            <div class="grid" *ngIf="builtInKey.value">
                <div class="col-2">
                    <label>Immediate Result</label>
                </div>
                <div class="col">
                    <p-dropdown [options]="immediateResultOptions" optionLabel="label"
                        [(ngModel)]="immediateResult"></p-dropdown>
                </div>
            </div>
            <div class="grid">
                <div class="col">
                    <div class="text-center">
                        <p-button label="Create" class="text-center" (click)="onCreate()"></p-button>
                        <p-button label="Reset" class="ml-5" (click)="onReset()"></p-button>
                    </div>
                </div>
            </div>
        </p-card>
    </p-tabPanel>
</p-tabView>

<p-toast></p-toast>